<mat-toolbar>Gestão de manutenção</mat-toolbar>

 <ng-template #carregando>
    <mat-spinner></mat-spinner>
 </ng-template>

<div class="componente-container">
    <div *ngIf="maintenances$ | async as maintenances; else carregando">
        <table mat-table [dataSource]="maintenances">

            <ng-container matColumnDef="assetName">
                <th mat-header-cell *matHeaderCellDef>Ativo</th>
                <td mat-cell *matCellDef="let maintenance">
                    <a routerLink="/maintenances/update/{{maintenance.id}}">{{ maintenance.assetName }}</a>
                </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Tipo</th>
                <td mat-cell *matCellDef="let maintenance">
                    {{ Type(maintenance.type) }}
                </td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>Status</th>
                <td mat-cell *matCellDef="let maintenance">
                    {{ Status(maintenance.status) }}
                </td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef>Data agendamento</th>
                <td mat-cell *matCellDef="let maintenance" [ngStyle]="{'color': maintenance.date < todayDate ? 'red' : 'blue'}">
                    {{maintenance.date | date:'yyyy-MM-dd' }}
                </td>
            </ng-container>
 
            <tr mat-header-row *matHeaderRowDef="colunasTabela"></tr>
            <tr mat-row *matRowDef="let row; columns: colunasTabela;"></tr>
        </table>

        <div class="linha-botoes">
            <button mat-raised-button color="primary" routerLink="/maintenances/insert">Cadastrar</button>
        </div>

    </div>
</div>
